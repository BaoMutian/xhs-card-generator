<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°çº¢ä¹¦å¡ç‰‡ç”Ÿæˆå™¨ - ä¸AIå¯¹è¯</title>
    
    <!-- Google Fonts: æ€æºå®‹ä½“ + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- KaTeX for Math -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <!-- Highlight.js for Code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    
    <!-- Marked.js for Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/marked.min.js"></script>
    
    <!-- html2canvas for Export -->
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    
    <!-- JSZip for ZIP Export -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <!-- å·¦ä¾§æ§åˆ¶é¢æ¿ -->
        <aside class="control-panel">
            <h1 class="app-title">ä¸AIå¯¹è¯<br><span>å¡ç‰‡ç”Ÿæˆå™¨</span></h1>
            
            <!-- æ–‡ä»¶é€‰æ‹© -->
            <section class="control-section">
                <h2>é€‰æ‹©å¯¹è¯æ–‡ä»¶</h2>
                <div class="file-input-wrapper">
                    <input type="file" id="file-input" accept=".md,.markdown" style="display:none;" />
                    <div class="file-label" id="file-picker-btn">
                        <span class="file-icon">ğŸ“„</span>
                        <span class="file-text">ç‚¹å‡»é€‰æ‹© Markdown æ–‡ä»¶</span>
                    </div>
                    <p class="file-name" id="selected-file-name"></p>
                </div>
                <div class="file-actions">
                    <button id="load-demo-btn" class="btn btn-secondary btn-small">
                        åŠ è½½æ¼”ç¤º
                    </button>
                    <button id="refresh-btn" class="btn btn-secondary btn-small" title="é‡æ–°åŠ è½½æ–‡ä»¶å¹¶åˆ·æ–°é¢„è§ˆ">
                        åˆ·æ–°é¢„è§ˆ
                    </button>
                </div>
            </section>
            
            <!-- å…ƒä¿¡æ¯è®¾ç½® -->
            <section class="control-section">
                <h2>å¡ç‰‡è®¾ç½®</h2>
                <div class="form-group">
                    <label for="vol-number">Vol ç¼–å·</label>
                    <input type="number" id="vol-number" value="1" min="1" />
                </div>
                <div class="form-group">
                    <label for="topic-tag">è¯é¢˜æ ‡ç­¾</label>
                    <input type="text" id="topic-tag" placeholder="å¦‚ï¼šå“²å­¦æ€è¾¨" />
                </div>
                <div class="form-group">
                    <label for="author-signature">ä½œè€…ç­¾å</label>
                    <input type="text" id="author-signature" value="@Vanilla" placeholder="å¦‚ï¼š@YourName" />
                </div>
            </section>
            
            <!-- å°é¢è®¾ç½® -->
            <section class="control-section">
                <h2>å°é¢å›¾è®¾ç½®</h2>
                <div class="form-group">
                    <label for="cover-title">ä¸»é¢˜é‡‘å¥</label>
                    <textarea id="cover-title" rows="3" placeholder="ä»å¯¹è¯ä¸­æå–çš„ç²¾åå¥å­..."></textarea>
                </div>
                <div class="form-group">
                    <label for="cover-subtitle">å‰¯æ ‡é¢˜</label>
                    <input type="text" id="cover-subtitle" placeholder="å¯é€‰çš„å‰¯æ ‡é¢˜" />
                </div>
            </section>
            
            <!-- å¯¹è¯é€‰æ‹© -->
            <section class="control-section">
                <h2>é€‰æ‹©å¯¼å‡ºå†…å®¹</h2>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="export-cover" checked />
                        <span>å°é¢å›¾</span>
                    </label>
                </div>
                <div id="conversation-list" class="conversation-list">
                    <!-- åŠ¨æ€ç”Ÿæˆå¯¹è¯é€‰æ‹©é¡¹ -->
                    <p class="placeholder-text">è¯·å…ˆé€‰æ‹© Markdown æ–‡ä»¶</p>
                </div>
            </section>
            
            <!-- å¯¼å‡ºæŒ‰é’® -->
            <section class="control-section export-section">
                <button id="preview-btn" class="btn btn-secondary" disabled>
                    é¢„è§ˆå¡ç‰‡
                </button>
                <button id="export-btn" class="btn btn-primary" disabled>
                    å¯¼å‡º ZIP
                </button>
            </section>
        </aside>
        
        <!-- å³ä¾§é¢„è§ˆåŒºåŸŸ -->
        <main class="preview-area">
            <div class="preview-header">
                <h2>å¡ç‰‡é¢„è§ˆ</h2>
                <div class="preview-controls">
                    <button id="prev-card" class="nav-btn" disabled>â—€ ä¸Šä¸€å¼ </button>
                    <span id="card-indicator">0 / 0</span>
                    <button id="next-card" class="nav-btn" disabled>ä¸‹ä¸€å¼  â–¶</button>
                </div>
            </div>
            
            <div class="preview-container">
                <div id="card-preview" class="card-wrapper">
                    <!-- å¡ç‰‡é¢„è§ˆåŒºåŸŸ -->
                    <div class="empty-state">
                        <p>é€‰æ‹© Markdown æ–‡ä»¶å</p>
                        <p>å¡ç‰‡é¢„è§ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- éšè—çš„å¯¼å‡ºå®¹å™¨ -->
    <div id="export-container" class="export-container"></div>
    
    <!-- åŠ è½½è‡ªå®šä¹‰è„šæœ¬ -->
    <script src="js/parser.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/exporter.js"></script>
    <script>
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            // KaTeX è‡ªåŠ¨æ¸²æŸ“é…ç½®
            if (typeof renderMathInElement !== 'undefined') {
                window.katexOptions = {
                    delimiters: [
                        {left: '$$', right: '$$', display: true},
                        {left: '$', right: '$', display: false},
                        {left: '\\[', right: '\\]', display: true},
                        {left: '\\(', right: '\\)', display: false}
                    ],
                    throwOnError: false
                };
            }
            
            // åˆå§‹åŒ–åº”ç”¨æ¨¡å—
            if (typeof AppParser !== 'undefined') {
                AppParser.init();
            }
            if (typeof AppRenderer !== 'undefined') {
                AppRenderer.init();
            }
            if (typeof AppExporter !== 'undefined') {
                AppExporter.init();
            }
        });
    </script>
</body>
</html>
